<!DOCTYPE HTML>
<h1 name="top">最新消息管理介面</h1>
<div ng-controller = "op-news-control">
  <button type = "button" class="btn btn-primary" ng-click="createForm()" style="margin-bottom:10px">新增</button>  
  <div id="createForm" class="panel panel-default">    
    <div class="panel-heading">{{isCreate?'新增商店類別':'修改商店類別'}}</div>    
    <form>
      <table class="table">
        <tr ng-hide="isCreate">
          <td>newsid</td>
          <td>
            <input type = "text" ng-model="News.newsid" readonly>
          </td>
        </tr>

        <tr>
          <td>
            title
          </td>
          <td>
            <input type = "text" ng-model="News.title" >
          </td>
        </tr>

        <tr>
          <td>
            image
          </td>
          <td>
            <img  id="preview" ng-hide="!News.image"  ng-src="{{News.image}}"/>
            <input 
              type="file" 
              ng-model="input" 
              id="fileUpload" 
              ng-file-select="{name:'image'}"
              accept="image/*" 
              style="display: none;"/>
            <button id='btn-upload'>選擇圖檔</button>
            <label id="showFilename"></label>
          </td>
        </tr>

        <tr>
          <td>category</td>
          <td>
            <input 
              type="text" 
              ng-model="News.category">
          </td>
        </tr>

        <tr>
          <td>content</td>
          <td>
            <input type= "text" ng-model="News.content"/>
          </td>
        </tr>
        <tr>
          <td>
            date
          </td>
          <td>
            <input type = "text" ng-model="News.date" >
          </td>
        </tr>

        <tr>
          <td colspan="2">
            <button class="btn btn-warning"  ng-click="submita()">Submit</button>
          </td>
        </tr>
      </table>
    </form>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">News</div> 
    <table class="table">      
      <tbody>
        <tr>
          <th>newsid</th>
          <th>Title</th>
          <th>Image</th>
          <th>Category</th>
          <th>Content</th>
          <th>Date</th>
        </tr>
        <tr ng-repeat = "news in newsList | orderBy:'+rank':reverse">
          <td>{{news.newsid}}</td>
          <td>{{news.title}}</td>
          <td><img ng-src="{{news.image}}" style="width:100; height=100"></td>
          <td>{{news.category}}</td>
          <td>{{news.date}}</td>
          <td><button type = "button" class="btn btn-primary" ng-click="dataUpdate(news.newsid)">更新</button></td>
          <td><button type = "button" class="btn btn-danger" ng-click="DeleteNews(news.newsid)">刪除</button></td>

        </tr>
      </tbody> 
    </table>
  </div>
  

</div>